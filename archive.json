{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2025-03-20T00:30:27.516571+00:00",
  "repo": "yoavweiss/delete-cookie",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 1,
      "id": "I_kwDON-fYzM6rUP9B",
      "title": "need to cite the cookie spec",
      "url": "https://github.com/yoavweiss/delete-cookie/issues/1",
      "state": "CLOSED",
      "author": "reschke",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "(I assume)",
      "createdAt": "2025-02-24T08:40:49Z",
      "updatedAt": "2025-02-24T09:41:29Z",
      "closedAt": "2025-02-24T09:41:25Z",
      "comments": [
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": "Thanks! Closed by https://github.com/yoavweiss/delete-cookie/commit/189759333245a638fe866d8abb2511c73e90b636 (I think - but let me know if there are other places where a reference could be useful)",
          "createdAt": "2025-02-24T09:41:25Z",
          "updatedAt": "2025-02-24T09:41:25Z"
        }
      ]
    },
    {
      "number": 2,
      "id": "I_kwDON-fYzM6rUaTq",
      "title": "Extend introduction to include `partitioned` attribute",
      "url": "https://github.com/yoavweiss/delete-cookie/issues/2",
      "state": "OPEN",
      "author": "tunetheweb",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "I wonder if the intro should be extended to include `partitioned` attribute? That's another one we've seen confusion with as sites migrate from non-partitioned to partitioned cookies.\n\nSee also: https://developers.google.com/privacy-sandbox/cookies/chips-transition",
      "createdAt": "2025-02-24T08:58:31Z",
      "updatedAt": "2025-02-25T19:28:15Z",
      "closedAt": null,
      "comments": [
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": "Can you expand on that? Do you want servers to be able to delete partitioned cookies specifically?\n\nAs defined, both partitioned and non-partitioned cookies of a certain name will be deleted. Is that not desired for some reason?",
          "createdAt": "2025-02-24T09:33:20Z",
          "updatedAt": "2025-02-24T09:33:20Z"
        },
        {
          "author": "tunetheweb",
          "authorAssociation": "NONE",
          "body": "This text doesn\u2019t mention this attribute:\n\n> Deleting cookies is possible today by setting their expiry date to one in the past, but that requires one to know the \"domain\" and \"path\" parameters with which the cookies were set. That is not something that can be passively observed on the server side by default.[\u00b6](https://yoavweiss.github.io/delete-cookie/draft-deletecookie-weiss-http.html#section-1-3)\n\nSo I wanted to 1) confirm that was the case (both cookies would be deleted and not just the first matching one) and 2) thought it was another use case to help you push the need for this.",
          "createdAt": "2025-02-24T09:57:31Z",
          "updatedAt": "2025-02-24T09:57:31Z"
        },
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": "Oh, does the server also needs to know the \"partitioned\" attribute in order to delete a cookie today? I was not aware of that",
          "createdAt": "2025-02-24T09:58:55Z",
          "updatedAt": "2025-02-24T09:58:55Z"
        },
        {
          "author": "tunetheweb",
          "authorAssociation": "NONE",
          "body": "As per above link I think it does need to know to set the appropriate `max-age` to delete it, and also to avoid creating a duplicated cookie (which is easy to do and complicates matters no end!).\n\nBut I\u2019m not an expert on this and only worked on it very briefly. So maybe I should tag in the likes of @samdutton, @krgovind and @johannhof. It seems to me this proposal could prove useful to help manage partitioned cookies easier (whether as part of a shorter term migration or even in long term beyond that).",
          "createdAt": "2025-02-24T10:18:00Z",
          "updatedAt": "2025-02-24T14:42:54Z"
        },
        {
          "author": "krgovind",
          "authorAssociation": "NONE",
          "body": "cc @dcthetall @aselya as well.\n\n> Oh, does the server also needs to know the \"partitioned\" attribute in order to delete a cookie today? I was not aware of that\n\nYes, @tunetheweb is right, the server would need to know to add the Partitioned attribute to delete the cookie correctly.",
          "createdAt": "2025-02-24T14:41:31Z",
          "updatedAt": "2025-02-24T14:41:31Z"
        },
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": " I was looking to where `partitioned` is defined and found https://datatracker.ietf.org/doc/draft-cutler-httpbis-partitioned-cookies/ which seems to have expired. Are there plans to bring `partitioned` to a standards venue?",
          "createdAt": "2025-02-25T12:33:06Z",
          "updatedAt": "2025-02-25T12:33:06Z"
        },
        {
          "author": "johannhof",
          "authorAssociation": "NONE",
          "body": "> I was looking to where `partitioned` is defined and found https://datatracker.ietf.org/doc/draft-cutler-httpbis-partitioned-cookies/ which seems to have expired. Are there plans to bring `partitioned` to a standards venue?\n\nYes, that's one thing our [proposed 6265bis successor](https://github.com/johannhof/draft-annevk-johannhof-httpbis-cookies) is intended to bring to the Cookies spec (it actually doesn't mention partitioned cookies right now but that's being worked on by @dcthetall).\n\n> Yes, @tunetheweb is right, the server would need to know to add the Partitioned attribute to delete the cookie correctly.\n\n+1 on that requirement, though I'll read this proposal in more detail before I can comment on what the implications on it are :)",
          "createdAt": "2025-02-25T19:28:14Z",
          "updatedAt": "2025-02-25T19:28:14Z"
        }
      ]
    },
    {
      "number": 3,
      "id": "I_kwDON-fYzM6tcwVJ",
      "title": "Scope of deletion.",
      "url": "https://github.com/yoavweiss/delete-cookie/issues/3",
      "state": "OPEN",
      "author": "mikewest",
      "authorAssociation": "CONTRIBUTOR",
      "assignees": [],
      "labels": [],
      "body": "The current draft requires that \"A user agent that receives a Delete-Cookie response header MUST delete cookies for the server's registrable domain with corresponding names from its cookie store. Each name could match multiple cookies of that same name, set on different paths.\"\n\nThis is a little unclear about the scope of any deletion, and it might be helpful to specify it a little more clearly. Is the intent to remove all cookies that [domain-match](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis#name-domain-matching) the server's host? That is, if `sub.example.com` sends the header, would cookies set on `subsub.sub.example.com` be removed?\n\nIf so, it might be reasonable to special-case `__host-` prefixed cookies, as they are otherwise locked to a host in a way distinct from typical domain-matching. If not, it would be helpful to clarify the scope more precisely. :)",
      "createdAt": "2025-03-11T10:31:11Z",
      "updatedAt": "2025-03-17T08:22:03Z",
      "closedAt": null,
      "comments": [
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": "> This is a little unclear about the scope of any deletion, and it might be helpful to specify it a little more clearly. Is the intent to remove all cookies that [domain-match](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis#name-domain-matching) the server's host? That is, if `sub.example.com` sends the header, would cookies set on `subsub.sub.example.com` be removed?\n\nThe guiding principle I had in mind is: any cookie that the server can get and set, is one it should be able to delete.\n\nSo a cookie set in `subsub.sub.example.com` with a `domain=example.com` attribute that covers can be deleted by `sub.example.com` sending a `Delete-Cookie` header.\n\nIf that makes sense, I can clarify that.\n\n> If so, it might be reasonable to special-case `__host-` prefixed cookies, as they are otherwise locked to a host in a way distinct from typical domain-matching. If not, it would be helpful to clarify the scope more precisely. :)\n\nMakes sense!!",
          "createdAt": "2025-03-11T11:20:14Z",
          "updatedAt": "2025-03-11T11:20:26Z"
        },
        {
          "author": "mikewest",
          "authorAssociation": "CONTRIBUTOR",
          "body": "> > This is a little unclear about the scope of any deletion, and it might be helpful to specify it a little more clearly. Is the intent to remove all cookies that [domain-match](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis#name-domain-matching) the server's host? That is, if `sub.example.com` sends the header, would cookies set on `subsub.sub.example.com` be removed?\n> \n> The guiding principle I had in mind is: any cookie that the server can get and set, is one it should be able to delete.\n> \n> So a cookie set in `subsub.sub.example.com` with a `domain=example.com` attribute that covers can be deleted by `sub.example.com` sending a `Delete-Cookie` header.\n\nSo, `sub.example.com` could clear cookies set at `sub.example.com` and `example.com`, but wouldn't clear cookies set at `subsub.sub.example.com`, or host-only cookies (e.g. cookies without a `domain` attribute) set at `example.com`?\n\n> If that makes sense, I can clarify that.\n\nI think it would be helpful to specify the set of cookies this header would act upon for a given response. See step 1 of https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis#section-5.8.3 for some example things to consider (prefixes, the `host-only-flag`, the target host, and whether you're acting on exact string matching or domain-matching jump out at me, but there might be other considerations).\n\nIt might also be helpful to specify when this happens in terms of Fetch: does deletion precede or follow processing of the `cookie` header, for example?\n\n",
          "createdAt": "2025-03-11T11:50:07Z",
          "updatedAt": "2025-03-11T11:50:07Z"
        },
        {
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "body": "> It might also be helpful to specify when this happens in terms of Fetch: does deletion precede or follow processing of the `cookie` header, for example?\n\nSpecified ([here](https://github.com/yoavweiss/delete-cookie/pull/4), and not really in terms of Fetch) that cookie deletion would happen before `Set-Cookie` is applied.",
          "createdAt": "2025-03-17T08:22:02Z",
          "updatedAt": "2025-03-17T08:22:02Z"
        }
      ]
    },
    {
      "number": 5,
      "id": "I_kwDON-fYzM6umX_C",
      "title": "Add an examples section!",
      "url": "https://github.com/yoavweiss/delete-cookie/issues/5",
      "state": "OPEN",
      "author": "yoavweiss",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2025-03-18T17:27:40Z",
      "updatedAt": "2025-03-18T17:27:40Z",
      "closedAt": null,
      "comments": []
    }
  ],
  "pulls": [
    {
      "number": 4,
      "id": "PR_kwDON-fYzM6O3y5s",
      "title": "Better define cookie deletion algorithm",
      "url": "https://github.com/yoavweiss/delete-cookie/pull/4",
      "state": "MERGED",
      "author": "yoavweiss",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "This should address #3 ",
      "createdAt": "2025-03-17T07:52:07Z",
      "updatedAt": "2025-03-18T17:27:25Z",
      "baseRepository": "yoavweiss/delete-cookie",
      "baseRefName": "main",
      "baseRefOid": "88bfa1404afd6e160d8482979790f56634b26e01",
      "headRepository": "yoavweiss/delete-cookie",
      "headRefName": "define_cookie_deletion",
      "headRefOid": "2503fa1b36d29d60bc52267ea4b263516ec0ed85",
      "closedAt": "2025-03-18T17:27:25Z",
      "mergedAt": "2025-03-18T17:27:25Z",
      "mergedBy": "yoavweiss",
      "mergeCommit": {
        "oid": "feeed8677839e4a48af52067136dd52789c1f44b"
      },
      "comments": [],
      "reviews": [
        {
          "id": "PRR_kwDON-fYzM6gU0sq",
          "commit": {
            "abbreviatedOid": "3b057e0"
          },
          "author": "mikewest",
          "authorAssociation": "CONTRIBUTOR",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2025-03-17T09:56:21Z",
          "updatedAt": "2025-03-17T10:51:39Z",
          "comments": [
            {
              "originalPosition": 6,
              "body": "Precision here will need to wait for 6265tre, I suppose, but you'll want to come up with a way of saying that this happens before step 15 of https://fetch.spec.whatwg.org/#http-network-fetch. You could, for example, just add that as a note here. :)",
              "createdAt": "2025-03-17T09:56:21Z",
              "updatedAt": "2025-03-17T10:51:39Z"
            },
            {
              "originalPosition": 12,
              "body": "I'd expect something kinda like the following rough sketch:\r\n\r\n> When a user agent receives a response containing a `Delete-Cookie` header field, the user agent MUST:\r\n>\r\n> 1.  Let `host` be the canonicalized host name of the response's URL. \r\n> 1.  Let `parsed` be the result of parsing the header's value as a List, as per {{RFC8941}}, Section 4.2.1.\r\n> 1.  If parsing fails, return without touching the cookie store.\r\n> 1.  For each `name` in `parsed`:\r\n>     1.  ISSUE: What do you want to do if the item's type isn't String? Skip it and continue to the next? Fail parsing? Crash the browser?\r\n>     1.  ISSUE: What do you want to do with parameters? Ignore them?\r\n>     1.  Let `matching cookies` be the set of cookies from the user agent's cookie store that meet all the following requirements:\r\n>         *   The cookie's `name` is `name`.\r\n>         *   Either of the following is `true`:\r\n>             *   The cookie's `host-only-flag` is `true`, and the cookie's `domain` is identical to `host`.\r\n>             *   The cookie's `host-only-flag` is `false`, and the cookie's `domain` domain-matches `host`, as per {{COOKIES}}, Section 5.1.3.\r\n>     1.  For each `cookie` in `matching cookies`:\r\n>         1.  Remove `cookie` from the user agent's cookie store.\r\n\r\nSome other thoughts:\r\n\r\n* Do you want to accept `Delete-Cookie` headers over non-secure connections? I'd suggest that you'd ideally punt out of the algorithm above for plaintext connections. If you have reason not to do that, add something about the `secure-only-flag` in the matching requirements to sure that non-secure sites can't remove secure site's cookies.\r\n* It might be helpful to note somewhere that cookies with empty names can be removed via empty string (e.g. `Delete-Cookie: \"\"`).\r\n* Likewise, adding a note in prose about the scoping, the impact of `__Host-`, etc. would be helpful, as not everyone reading this will think in algorithms.\r\n* Also, noting that this should remove all cookies with a given name, regardless of path or domain shadowing (or any other flag: httponly, expiration, etc), could remove ambiguity.",
              "createdAt": "2025-03-17T10:51:31Z",
              "updatedAt": "2025-03-17T10:51:39Z"
            }
          ]
        },
        {
          "id": "PRR_kwDON-fYzM6gbNU5",
          "commit": {
            "abbreviatedOid": "3b057e0"
          },
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2025-03-17T17:31:01Z",
          "updatedAt": "2025-03-17T17:31:01Z",
          "comments": [
            {
              "originalPosition": 12,
              "body": "Thanks!! Revamped!",
              "createdAt": "2025-03-17T17:31:01Z",
              "updatedAt": "2025-03-17T17:31:01Z"
            }
          ]
        },
        {
          "id": "PRR_kwDON-fYzM6gin6E",
          "commit": {
            "abbreviatedOid": "7606797"
          },
          "author": "mikewest",
          "authorAssociation": "CONTRIBUTOR",
          "state": "APPROVED",
          "body": "",
          "createdAt": "2025-03-18T08:21:40Z",
          "updatedAt": "2025-03-18T08:29:08Z",
          "comments": [
            {
              "originalPosition": 12,
              "body": "Nit: To match the language in rfc6265:\r\n\r\n```suggestion\r\n1. If the response was not delivered over a \"secure\" connection (as defined by the user agent) {{COOKIES}}, return.\r\n```",
              "createdAt": "2025-03-18T08:21:41Z",
              "updatedAt": "2025-03-18T08:29:08Z"
            },
            {
              "originalPosition": 12,
              "body": "Nit: To match the language in rfc6265:\r\n\r\n```suggestion\r\n1. If the response was not delivered over a \"secure\" connection (as defined by the user agent) {{COOKIES}}, return.\r\n```",
              "createdAt": "2025-03-18T08:25:13Z",
              "updatedAt": "2025-03-18T08:29:08Z"
            },
            {
              "originalPosition": 19,
              "body": "Nit: I feel like the spacing of all the notes in this section is somewhat inconsistent. Have you checked the output?",
              "createdAt": "2025-03-18T08:25:50Z",
              "updatedAt": "2025-03-18T08:29:08Z"
            },
            {
              "originalPosition": 24,
              "body": "I'd suggest putting this into a example section in the intro or something rather than a note here, but I certainly wouldn't block on that.",
              "createdAt": "2025-03-18T08:26:48Z",
              "updatedAt": "2025-03-18T08:29:08Z"
            }
          ]
        },
        {
          "id": "PRR_kwDON-fYzM6gqrcQ",
          "commit": {
            "abbreviatedOid": "7606797"
          },
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2025-03-18T17:26:48Z",
          "updatedAt": "2025-03-18T17:26:48Z",
          "comments": [
            {
              "originalPosition": 19,
              "body": "Yeah. They *seem* fine..",
              "createdAt": "2025-03-18T17:26:48Z",
              "updatedAt": "2025-03-18T17:26:48Z"
            }
          ]
        },
        {
          "id": "PRR_kwDON-fYzM6gqrxL",
          "commit": {
            "abbreviatedOid": "7606797"
          },
          "author": "yoavweiss",
          "authorAssociation": "OWNER",
          "state": "COMMENTED",
          "body": "",
          "createdAt": "2025-03-18T17:27:18Z",
          "updatedAt": "2025-03-18T17:27:18Z",
          "comments": [
            {
              "originalPosition": 24,
              "body": "Thanks! I think I can add an example section as a followup",
              "createdAt": "2025-03-18T17:27:18Z",
              "updatedAt": "2025-03-18T17:27:18Z"
            }
          ]
        }
      ]
    }
  ]
}